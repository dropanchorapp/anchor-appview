{
  "lexicon": 1,
  "id": "app.dropanchor.checkin",
  "defs": {
    "main": {
      "type": "record",
      "description": "A location check-in record for the Anchor app",
      "key": "tid",
      "record": {
        "type": "object",
        "required": ["text", "createdAt", "address", "geo"],
        "properties": {
          "text": {
            "type": "string",
            "maxLength": 3000,
            "description": "The check-in message or note"
          },
          "createdAt": {
            "type": "string",
            "format": "datetime",
            "description": "When the check-in was created"
          },
          "address": {
            "type": "ref",
            "ref": "#address",
            "description": "Address of the check-in location (based on community.lexicon.location.address)"
          },
          "geo": {
            "type": "ref",
            "ref": "#geo",
            "description": "Geographic coordinates of the check-in (based on community.lexicon.location.geo)"
          },
          "category": {
            "type": "string",
            "maxLength": 100,
            "description": "Place category (e.g., cafe, restaurant)"
          },
          "categoryGroup": {
            "type": "string",
            "maxLength": 100,
            "description": "Category group for organization"
          },
          "categoryIcon": {
            "type": "string",
            "maxLength": 10,
            "description": "Emoji icon for the category"
          },
          "image": {
            "type": "ref",
            "ref": "#checkinImage",
            "description": "Optional image attachment for the check-in"
          },
          "fsq": {
            "type": "ref",
            "ref": "#fsqPlace",
            "description": "Optional Foursquare venue data (based on community.lexicon.location.fsq)"
          }
        }
      }
    },
    "address": {
      "type": "object",
      "description": "Street address (based on community.lexicon.location.address)",
      "required": ["country"],
      "properties": {
        "name": {
          "type": "string",
          "maxLength": 500,
          "description": "The name of the location"
        },
        "street": {
          "type": "string",
          "maxLength": 500,
          "description": "The street address"
        },
        "locality": {
          "type": "string",
          "maxLength": 200,
          "description": "The locality (city, town, etc.)"
        },
        "region": {
          "type": "string",
          "maxLength": 200,
          "description": "The administrative region (state, province, etc.)"
        },
        "postalCode": {
          "type": "string",
          "maxLength": 20,
          "description": "The postal code"
        },
        "country": {
          "type": "string",
          "minLength": 2,
          "maxLength": 10,
          "description": "The ISO 3166 country code (preferably 2-letter)"
        }
      }
    },
    "geo": {
      "type": "object",
      "description": "Geographic coordinates in WGS84 (based on community.lexicon.location.geo)",
      "required": ["latitude", "longitude"],
      "properties": {
        "latitude": {
          "type": "string",
          "maxLength": 32,
          "description": "Latitude in decimal degrees (range: -90 to 90)"
        },
        "longitude": {
          "type": "string",
          "maxLength": 32,
          "description": "Longitude in decimal degrees (range: -180 to 180)"
        },
        "altitude": {
          "type": "string",
          "maxLength": 32,
          "description": "Altitude in meters"
        },
        "name": {
          "type": "string",
          "maxLength": 500,
          "description": "Name of the location"
        }
      }
    },
    "fsqPlace": {
      "type": "object",
      "description": "Foursquare venue data (based on community.lexicon.location.fsq)",
      "required": ["fsqPlaceId"],
      "properties": {
        "fsqPlaceId": {
          "type": "string",
          "maxLength": 100,
          "description": "The unique identifier of a Foursquare POI"
        },
        "name": {
          "type": "string",
          "maxLength": 500,
          "description": "The name of the location"
        },
        "latitude": {
          "type": "string",
          "maxLength": 32,
          "description": "Latitude in decimal degrees"
        },
        "longitude": {
          "type": "string",
          "maxLength": 32,
          "description": "Longitude in decimal degrees"
        }
      }
    },
    "checkinImage": {
      "type": "object",
      "description": "Image attachment with thumbnail and full-size versions",
      "required": ["thumb", "fullsize"],
      "properties": {
        "thumb": {
          "type": "blob",
          "accept": ["image/jpeg", "image/png", "image/webp"],
          "maxSize": 300000,
          "description": "Thumbnail version (max 800px width, ~300KB)"
        },
        "fullsize": {
          "type": "blob",
          "accept": ["image/jpeg", "image/png", "image/webp"],
          "maxSize": 2000000,
          "description": "Full-size version (max 2000px width, ~2MB)"
        },
        "alt": {
          "type": "string",
          "maxLength": 1000,
          "description": "Alt text for accessibility"
        }
      }
    }
  }
}
